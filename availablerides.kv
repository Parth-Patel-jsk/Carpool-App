#:import get_color_from_hex kivy.utils.get_color_from_hex

<AvailableRidesScreen>:
    name: "available_rides"
    MDBoxLayout:
        orientation: 'vertical'
        md_bg_color: 0.1, 0.1, 0.1, 1  # Dark background
        BoxLayout:
            size_hint_y: None
            height: dp(56)  # Standard app bar height
            padding: [dp(10), 0]
            spacing: dp(10)
            md_bg_color: 0.1, 0.1, 0.1, 1  # Dark background

            MDIconButton:
                icon: "arrow-left"
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1

                on_release: root.manager.current = 'home'

            MDLabel:
                text: "Carpool App"
                font_style: "H6"
                color: 1,1,1,1
                size_hint_x: 0.85  # Adjust width
                halign: "center"
                theme_text_color: "Primary"

            MDIconButton:
                icon: "account"
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1

                on_release: app.root.current="profile"

        MDTabs:
            id: tabs
            md_bg_color: 0.1, 0.1, 0.1, 1  # Dark background
            text_color_active: 0, 0, 0, 1  # Black for active tab
            text_color_normal: 0.5, 0.5, 0.5, 1  # Gray for inactive tabs
            indicator_color: get_color_from_hex("#000000")  #black indicator_color
            on_tab_switch: app.on_tab_switch(*args)


            Tab:
                title: "Available Rides"
                icon: "car-multiple"
                
                MDBoxLayout:
                    orientation: 'vertical'
                    padding: dp(15)
                    spacing: dp(15)
                    
                    MDTextField:
                        id: destination_input
                        hint_text: "Search for a ride..."
                        mode: "rectangle"
                        size_hint_x: 1.0
                        line_color_normal: 0.13, 0.59, 0.95, 1
                        line_color_focus: 0.13, 0.59, 0.95, 1
                        hint_text_color_normal: 0.5, 0.5, 0.5, 1
                        hint_text_color_focus: 0.13, 0.59, 0.95, 1
                        text_color: 1,1,1,1
                        md_bg_color: 0.1, 0.1, 0.1, 1  # Dark background
                        radius: [dp(10), dp(10), dp(10), dp(10)]  # Rounded corners
                        elevation: 1  # Subtle shadow
                    
                    ScrollView:
                        MDList:
                            id: rides_list
                            padding: dp(10)
                            spacing: dp(15)
                            
                            MDCard:
                                size_hint: None, None
                                size: "290dp", "100dp"
                                padding: dp(15)
                                radius: [dp(10),]  # Rounded corners
                                md_bg_color: 0.15, 0.15, 0.15, 1

                                ripple_behavior: True  # Hover effect
                                on_release: app.root.current = "ride_details"
                                BoxLayout:
                                    orientation: 'horizontal'
                                    spacing: dp(15)
                                    
                                    MDIconButton:
                                        icon: "car"
                                        theme_text_color: "Custom"
                                        text_color: 0.13, 0.59, 0.95, 1
                                        pos_hint: {"center_y": .5}
                                        
                                    
                                    BoxLayout:
                                        orientation: 'vertical'
                                        spacing: dp(5)
                                        md_bg_color: 0.1, 0.1, 0.1, 1  # Dark background
                                        MDLabel:
                                            text: "Home to Office"
                                            font_size: "14sp"

                                            theme_text_color: "Custom"
                                            text_color: 1, 1, 1, 1
                                            size_hint_y: None
                                            height: self.texture_size[1]
                                        
                                        BoxLayout:
                                            orientation: 'horizontal'
                                            size_hint_y: None
                                            height: dp(20)
                                            
                                            MDIcon:
                                                icon: "clock-outline"
                                                size_hint: None, None
                                                size: dp(17), dp(17)
                                                theme_text_color: "Custom"
                                                text_color: 0.7, 0.7, 0.7, 1

                                            
                                            MDLabel:
                                                text: "8:30 AM"
                                                font_style: "Caption"
                                                theme_text_color: "Custom"
                                                text_color: 0.7, 0.7, 0.7, 1

                                        
                                        BoxLayout:
                                            orientation: 'horizontal'
                                            size_hint_y: None
                                            height: dp(20)
                                            
                                            MDIcon:
                                                icon: "account-outline"
                                                size_hint: None, None
                                                size: dp(20), dp(20)
                                                theme_text_color: "Custom"
                                                text_color: 0.7, 0.7, 0.7, 1

                                            
                                            MDLabel:
                                                text: "2 seats available"
                                                font_style: "Caption"
                                                theme_text_color: "Custom"
                                                text_color: 0.7, 0.7, 0.7, 1

                                    
                                    MDLabel:
                                        text: "Rs 5.00"
                                        halign: "right"
                                        font_size: "14sp"
                                        theme_text_color: "Custom"
                                        text_color: 1, 1, 1, 1

                                        size_hint_x: None
                                        width: dp(40)
                            
                            MDCard:
                                size_hint: None, None
                                size: "290dp", "120dp"
                                padding: dp(15)
                                radius: [dp(10),]
                                md_bg_color: 0.15, 0.15, 0.15, 1
                                on_release: app.root.current = "ride_details"
                                ripple_behavior: True
                                
                                BoxLayout:
                                    orientation: 'horizontal'
                                    spacing: dp(15)
                                    
                                    MDIconButton:
                                        icon: "car"
                                        theme_text_color: "Custom"
                                        text_color: 0.13, 0.59, 0.95, 1
                                        pos_hint: {"center_y": .5}
                                    
                                    BoxLayout:
                                        orientation: 'vertical'
                                        spacing: dp(5)
                                        
                                        MDLabel:
                                            text: "Home to IAR University"
                                            font_size: "14sp"
                                            theme_text_color: "Custom"
                                            text_color: 1, 1, 1, 1

                                            size_hint_y: None
                                            height: self.texture_size[1]
                                        
                                        BoxLayout:
                                            orientation: 'horizontal'
                                            size_hint_y: None
                                            height: dp(20)
                                            
                                            MDIcon:
                                                icon: "clock-outline"
                                                size_hint: None, None
                                                size: dp(20), dp(20)
                                                theme_text_color: "Custom"
                                                text_color: 0.7, 0.7, 0.7, 1

                                            
                                            MDLabel:
                                                text: "5:45 PM"
                                                font_style: "Caption"
                                                theme_text_color: "Custom"
                                                text_color: 0.7, 0.7, 0.7, 1

                                        
                                        BoxLayout:
                                            orientation: 'horizontal'
                                            size_hint_y: None
                                            height: dp(20)
                                            
                                            MDIcon:
                                                icon: "account-outline"
                                                size_hint: None, None
                                                size: dp(20), dp(20)
                                                theme_text_color: "Custom"
                                                text_color: 0.7, 0.7, 0.7, 1

                                            
                                            MDLabel:
                                                text: "3 seats available"
                                                font_style: "Caption"
                                                theme_text_color: "Custom"
                                                text_color: 0.7, 0.7, 0.7, 1

                                    
                                    MDLabel:
                                        text: "Rs 7.00"
                                        halign: "right"
                                        font_size: "14sp"
                                        theme_text_color: "Custom"
                                        text_color: 1, 1, 1, 1
                                        size_hint_x: None
                                        width: dp(40)

            Tab:
                title: "My Rides"
                icon: "car-clock"
                
                ScrollView:
                    MDList:
                        padding: dp(20)
                        spacing: dp(15)
                        
                        MDCard:
                            size_hint: None, None
                            size: "290dp", "120dp"
                            padding: dp(15)
                            radius: [dp(10),]
                            md_bg_color: 0.15, 0.15, 0.15, 1
                            ripple_behavior: True
                            on_release: app.root.current = "ride_details"
                            BoxLayout:
                                orientation: 'horizontal'
                                spacing: dp(15)
                                
                                MDIconButton:
                                    icon: "car"
                                    theme_text_color: "Custom"
                                    text_color: 0.13, 0.59, 0.95, 1
                                    pos_hint: {"center_y": .5}
                                
                                BoxLayout:
                                    orientation: 'vertical'
                                    spacing: dp(5)
                                    
                                    MDLabel:
                                        text: "Airport to Koba"
                                        font_size: "16sp"
                                        theme_text_color: "Custom"
                                        text_color: 1, 1, 1, 1

                                        size_hint_y: None
                                        height: self.texture_size[1]
                                    
                                    BoxLayout:
                                        orientation: 'horizontal'
                                        size_hint_y: None
                                        height: dp(20)
                                        
                                        MDIcon:
                                            icon: "map-marker-outline"
                                            size_hint: None, None
                                            size: dp(17), dp(17)
                                            theme_text_color: "Custom"
                                            text_color: 0.7, 0.7, 0.7, 1

                                        
                                        MDLabel:
                                            text: "Home to Office"
                                            font_style: "Caption"
                                            theme_text_color: "Custom"
                                            text_color: 0.7, 0.7, 0.7, 1

                                    
                                    BoxLayout:
                                        orientation: 'horizontal'
                                        size_hint_y: None
                                        height: dp(20)
                                        
                                        MDIcon:
                                            icon: "calendar-clock"
                                            size_hint: None, None
                                            size: dp(17), dp(17)
                                            theme_text_color: "Custom"
                                            text_color: 0.7, 0.7, 0.7, 1

                                        
                                        MDLabel:
                                            text: "Tomorrow, 8:00 AM"
                                            font_size: "12sp"
                                            theme_text_color: "Custom"
                                            text_color: 0.7, 0.7, 0.7, 1

                                
            

 
        
    # Bottom navigation - simplified
    MDBoxLayout:
        adaptive_height: True
        size_hint_y: None
        height: "60dp"
        md_bg_color: 0.15, 0.15, 0.15, 1
        
        MDGridLayout:
            cols: 4
            
            MDBoxLayout:
                orientation: "vertical"
                
                MDIconButton:
                    icon: "home"
                    icon_size: "24sp"
                    pos_hint: {"center_x": 0.5}
                    theme_text_color: "Custom"
                    text_color: 0.5, 0.5, 0.5, 1
                    user_font_size: "24sp"
                    on_release: root.manager.current = "home"
                    
                MDLabel:
                    text: "Home"
                    halign: "center"
                    font_size: "10sp"
                    theme_text_color: "Custom"
                    text_color: 0.5, 0.5, 0.5, 1
            
            MDBoxLayout:
                orientation: "vertical"
                
                MDIconButton:
                    icon: "view-grid"
                    icon_size: "24sp"
                    pos_hint: {"center_x": 0.5}
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1
                    user_font_size: "24sp"
                    
                MDLabel:
                    text: "Services"
                    halign: "center"
                    font_size: "10sp"
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1
            
            MDBoxLayout:
                orientation: "vertical"
                
                MDIconButton:
                    icon: "clipboard-text"
                    icon_size: "24sp"
                    pos_hint: {"center_x": 0.5}
                    theme_text_color: "Custom"
                    text_color: 0.5, 0.5, 0.5, 1
                    user_font_size: "24sp"
                    on_release: root.manager.current = "available_rides"
                    
                MDLabel:
                    text: "Activity"
                    halign: "center"
                    font_size: "10sp"
                    theme_text_color: "Custom"
                    text_color: 0.5, 0.5, 0.5, 1
            
            MDBoxLayout:
                orientation: "vertical"
                
                MDIconButton:
                    icon: "account"
                    icon_size: "24sp"
                    pos_hint: {"center_x": 0.5}
                    theme_text_color: "Custom"
                    text_color: 0.5, 0.5, 0.5, 1
                    user_font_size: "24sp"
                    on_release: root.manager.current = "profile"
                    
                MDLabel:
                    text: "Account"
                    halign: "center"
                    font_size: "10sp"
                    theme_text_color: "Custom"
                    text_color: 0.5, 0.5, 0.5, 1